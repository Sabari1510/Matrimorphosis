<app-navbar></app-navbar>

<main class="portal-main">
    <div class="portal-header">
        <div class="header-content">
            <div class="header-left">
                <div class="header-icon">üè†</div>
                <div class="header-text">
                    <h1>Resident Dashboard</h1>
                    <p class="header-subtitle">View and manage your maintenance requests</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="notification-btn">
                    <svg class="notification-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-badge" *ngIf="unreadNotifications > 0">{{ unreadNotifications }}</span>
                </button>
            </div>
        </div>
    </div>

    <div class="portal-container">
        <!-- Quick Actions -->
        <div class="quick-actions-section">
            <h2 class="section-title">Quick Actions</h2>
            <div class="quick-actions-grid">
                <a routerLink="/maintenance/new" class="action-card">
                    <div class="action-icon new-request">+</div>
                    <div class="action-content">
                        <h3>New Request</h3>
                        <p>Submit a maintenance request</p>
                    </div>
                </a>
                <a routerLink="/maintenance/history" class="action-card">
                    <div class="action-icon view-requests">üìã</div>
                    <div class="action-content">
                        <h3>View All Requests</h3>
                        <p>See your request history</p>
                    </div>
                </a>
            </div>
        </div>


        <!-- Request Overview -->
        <div class="overview-section">
            <h2 class="section-title">Request Overview</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <div class="overview-icon">
                        <span class="icon-text">#</span>
                    </div>
                    <div class="overview-content">
                        <div class="overview-value">{{ stats.total }}</div>
                        <div class="overview-label">Total Requests</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="overview-icon warning">
                        <span class="icon-text">‚è±</span>
                    </div>
                    <div class="overview-content">
                        <div class="overview-value">{{ stats.pending }}</div>
                        <div class="overview-label">Pending</div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="overview-icon info">
                        <span class="icon-text">‚öô</span>
                    </div>
                    <div class="overview-content">
                        <div class="overview-value">{{ stats.inProgress }}</div>
                        <div class="overview-label">In Progress</div>
                    </div>
                </div>

                <div class="overview-card success">
                    <div class="overview-icon">
                        <span class="icon-text">‚úì</span>
                    </div>
                    <div class="overview-content">
                        <div class="overview-value">{{ stats.completed }}</div>
                        <div class="overview-label">Completed</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Two Column Layout -->
        <div class="dashboard-grid">
            <!-- Recent Requests -->
            <div class="section-card">
                <div class="section-header">
                    <h2 class="section-title">Recent Requests</h2>
                    <a routerLink="/maintenance/history" class="view-all-link">View All ‚Üí</a>
                </div>

                <div class="request-list">
                    <div *ngFor="let request of requests.slice(0, 5)" class="request-card">
                        <div class="request-header">
                            <div class="request-id">
                                <span class="id-label">{{ request.id }}</span>
                                <span class="category-badge">{{ getCategoryLabel(request.category) }}</span>
                            </div>
                            <span class="status-badge" [class]="'status-' + request.status">
                                {{ formatStatus(request.status) }}
                            </span>
                        </div>
                        <h3 class="request-title">{{ request.title }}</h3>
                        <p class="request-description">{{ request.description }}</p>
                        <div class="request-footer">
                            <span class="priority-badge" [class]="'priority-' + request.priority">
                                {{ request.priority | uppercase }}
                            </span>
                            <span class="request-date">
                                {{ formatDate(request.createdDate) }}
                            </span>
                        </div>
                    </div>

                    <div *ngIf="requests.length === 0" class="empty-state">
                        <p>No requests submitted yet</p>
                        <p class="empty-subtitle">Click "New Request" above to get started</p>
                    </div>
                </div>
            </div>

            <!-- Tips & Information -->
            <div class="tips-section">
                <div class="tips-card">
                    <h3 class="tips-title">üí° Helpful Tips</h3>
                    <ul class="tips-list">
                        <li>
                            <strong>Be Specific:</strong> Include detailed descriptions and photos for faster resolution
                        </li>
                        <li>
                            <strong>Priority Levels:</strong> Use "Urgent" only for emergencies like water leaks or
                            electrical hazards
                        </li>
                        <li>
                            <strong>Track Progress:</strong> Check your requests page to see updates from maintenance
                            staff
                        </li>
                        <li>
                            <strong>Response Time:</strong> Most requests are addressed within 24-48 hours
                        </li>
                    </ul>
                </div>

                <div class="contact-card">
                    <h3 class="contact-title">üìû Emergency Contact</h3>
                    <p class="contact-info">For urgent issues outside business hours:</p>
                    <p class="contact-number">+91 98765 43210</p>
                    <p class="contact-hours">Available 24/7</p>
                </div>
            </div>
        </div>
    </div>
</main>